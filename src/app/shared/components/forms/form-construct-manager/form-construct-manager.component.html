<div
  class="my-custom-form-container max-w-3xl mx-auto bg-gray-50 dark:bg-gray-900 rounded-lg shadow-lg relative"
>
  <div
    class="sticky top-0 left-0 right-0 z-20 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-md border-b border-slate-300 dark:border-slate-700 shadow-sm"
  >
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between gap-4 py-3 md:py-4">
        <div class="flex shrink-0 items-center">
          <h1
            class="text-xl md:text-2xl font-bold text-slate-800 dark:text-slate-100"
          >
            {{ "Completar Formulario" }}
          </h1>
        </div>

        <div class="min-w-0 flex-1 order-last sm:order-none sm:mx-4"></div>

        <div class="flex items-center">
          <button
            type="submit"
            form="actualFormId"
            class="bg-primary hover:bg-primaryhover text-white font-semibold py-2 px-4 sm:px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed"
            [disabled]="myForm.invalid && (myForm.touched || myForm.dirty)"
          >
            Guardar
          </button>
        </div>
      </div>
    </div>
  </div>
  <form
    [formGroup]="myForm"
    (ngSubmit)="onActualFormSubmit()"
    novalidate
    id="actualFormId"
    class="p-4 md:p-8"
  >
    <div class="space-y-6 pt-4">
      <div *ngFor="let fieldConfig of formStructure" class="field-wrapper">
        <app-form-input-manager
          [element]="fieldConfig"
          [control]="getControl(fieldConfig.key)!"
          [parentFormGroup]="myForm"
        ></app-form-input-manager>
      </div>
    </div>
<!--
    <div
      *ngIf="myForm"
      style="
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #ccc;
        background-color: #f9f9f9;
      "
    >
      <h4>Estado de Depuración del Formulario:</h4>

      <p>
        <strong>Formulario Válido:</strong> {{ myForm.valid }} <br />
        <strong>Formulario Inválido:</strong> {{ myForm.invalid }} <br />
        <strong>Estado del Formulario:</strong> {{ myForm.status }}
      </p>

      <h5>Valores Actuales del Formulario (myForm.value):</h5>
      <pre>{{ myForm.value | json }}</pre>

      <h5>Errores del Formulario a Nivel de FormGroup (myForm.errors):</h5>
      <pre>{{ myForm.errors | json }}</pre>
      <h5>Estado "Touched" de los Controles:</h5>
      <div *ngFor="let key of objectKeys(myForm.controls)">
        {{ key }}: touched = {{ myForm.get(key)?.touched }}, pristine =
        {{ myForm.get(key)?.pristine }}
      </div>

      <h5>Errores Específicos por Control:</h5>
      <div *ngFor="let key of objectKeys(myForm.controls)">
        <div *ngIf="myForm.get(key)?.errors">
          <strong>Errores en {{ key }}:</strong>
          <pre>{{ myForm.get(key)?.errors | json }}</pre>
        </div>
      </div>
      {{ initialData | json }}
    </div>
    -->
  </form>
</div>
